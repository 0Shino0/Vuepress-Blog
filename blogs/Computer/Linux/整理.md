



## 选填

### 常识题

Linux操作系统的创始人和主要设计者是 **Linus Torvalds**

LInux内核遵循 GPL 许可条例。



### Linux联机帮助命令 `man`

你可以使用 *man [命令]* 来查看各个命令的使用文档，如 ：man cp。



### grep命令

Linux grep (global regular expression) 命令用于**查找文件里符合条件的字符串或正则表达式。**



### 一行内运行多个命令

在Linux中，有三种方法可以在一行中运行多个命令:

|      | 示例                     | 含义                                           |
| ---- | ------------------------ | ---------------------------------------------- |
| `;`  | `Command 1;Command 2`    | 首先运行Command1，**然后**运行Command2         |
| `&&` | `Command 1 && Command 2` | 当Command1**运行成功**并结束，然后运行Command2 |
| `||` | `Command 1 || Command 2` | 当Command1**运行失败**时才运行Command2         |



### shell中的几种标准输出重定向方式

| 命令            | 说明                                                         |
| :-------------- | :----------------------------------------------------------- |
| command > file  | 将输出重定向到 file。**注意**任何file内的已经存在的内容将被新内容**替代**。如果要将新内容添加在文件末尾，请使用>>操作符。 |
| command < file  | 将输入重定向到 file。                                        |
| command >> file | 将输出以追加的方式重定向到 file。                            |
| n > file        | 将文件描述符为 n 的文件重定向到 file。                       |
| n >> file       | 将文件描述符为 n 的文件以追加的方式重定向到 file。           |
| n >& m          | 将输出文件 m 和 n 合并。                                     |
| n <& m          | 将输入文件 m 和 n 合并。                                     |
| << tag          | 将开始标记 tag 和结束标记 tag 之间的内容作为输入。           |





### 文件的访问权限

在 Linux 中第一个字符代表这个文件是目录、文件或链接文件等等。

- **当为 d 则是目录**
- **当为 - 则是文件；**
- **若是 l 则表示为链接文档(link file)；**
- 若是 **b** 则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
- 若是 **c** 则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。

接下来的字符中，以三个为一组，且均为 **rwx** 的三个参数的组合。其中， **r** 代表可读(read)、 **w** 代表可写(write)、 **x** 代表可执行(execute)。 要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号 **-** 而已。

![img](https://shinoimg.yyshino.top/img/202305121545561.jpeg)



#### 十位权限表示

常见的权限表示形式有：

每个文件的属性由左边第一部分的 10 个字符来确定（如下图）。

![363003_1227493859FdXT](https://shinoimg.yyshino.top/img/202305121546416.png)

从左至右用 **0-9** 这些数字来表示。

第 **0** 位确定文件类型

第 **1-3** 位确定**属主**（该文件的所有者）拥有该文件的权限。

第**4-6**位确定**属组**（所有者的同组用户）拥有该文件的权限，

第**7-9**位确定**其他用户**拥有该文件的权限。

其中，第 **1、4、7** 位表示读权限，如果用 **r** 字符表示，则有读权限，如果用 **-** 字符表示，则没有读权限；第 **2、5、8** 位表示写权限，如果用 **w** 字符表示，则有写权限，如果用 **-** 字符表示没有写权限；第 **3、6、9** 位表示可执行权限，如果用 **x** 字符表示，则有执行权限，如果用 **-** 字符表示，则没有执行权限。

```text
示例：
-rw------- (600)    只有拥有者有读写权限。
-rw-r--r-- (644)    只有拥有者有读写权限；而属组用户和其他用户只有读权限。
-rwx------ (700)    只有拥有者有读、写、执行权限。
-rwxr-xr-x (755)    拥有者有读、写、执行权限；而属组用户和其他用户只有读、执行权限。
-rwx--x--x (711)    拥有者有读、写、执行权限；而属组用户和其他用户只有执行权限。
-rw-rw-rw- (666)    所有用户都有文件读、写权限。
-rwxrwxrwx (777)    所有用户都有读、写、执行权限。
```



### 新建文件的默认权限

当新建一个文件或目录时,系统会为其设置最初的权限。文件的初始权限由文件创建掩码(creation mask)决定。掩码是一个9位二进制数字，通常用八进制数字表示，如022。掩码中的位与权限字符串相对应,掩码中为1的位限制对应的权限位的权限。例如,**掩码022 表示组用户和其他人没有 w 权限,对其他权限不做限制。**
文件创建时的默认权限有以下几种情况:

- 可执行文件：通过编译程序生成的可执行文件,它的默认权限是 777-掩码。例如，若掩码为 022,则新文件的权限就是 755。
- 非可执行文件：对于非可执行文件(如文本文件、数据文件等),在创建时默认是没有x权限的,对这类文件的x权限需要显式地赋予，即通过 chmod 命令将其改为可执行文件。因此新建文件的权限是`(777-掩码)&666`。这里的是“按位与”运算，即先用`777-掩码`求出权限,再滤掉所有 x 位。例如,若掩码为 022,则新文件的权限就是 `(777-022)& 666 = 644`。若掩码为 003,则新文件的权限就是`(777-003)&666=664`。
- 目录：同可执行文件一样,新建目录的默认权限是 777-掩码。若掩码为 022,则新目录的权限就是 755。

用户登录时,系统自动地为其设置了掩码,通常是 022。用户可以用命令修改掩码从而改变新建文件的默认权限,使之具有合适的安全性限制。



#### 文件的其他属性

除了文件名、文件类型、归属关系和存取权限外,文件还有其他一些属性,包括

1. 文件的时间标签，用于记录文件的时间属性，分为:
   - 修改时间(modify time):文件内容被修改的最后时间
   - 访问时间(access time):文件最近一次被访问的时间
   - 变更时间(change time):文件属性变更的最近时间。
2. 文件的大小,即文件所占用的字节数。
3. 文件的连接数,即此文件硬链接的数目。



## 实验命令整理

### 熟悉目录以及文件相关命令

`cd`、`pwd`、`ls`、`mkdir`、`rmdir`、`rm`

说明：  mkdir 的-p选项使用场景；

说明：  rm -rf 的使用场景

说明：  ls -al ，ls /etc | more 的作用



文件显示：`cat`、`more`、`less`

文件复制、删除和移动：cp、rm、mv 

创建或改变文件时间标签：touch



### 熟练运行通配符

基于ls命令练习通配符（？、*、[]）的使用
1)	在当前目录下生成 touch t{1..10}.c 文件
2)	ls *.c 作用
3)	ls  ??.c作用
4)	ls t[1-5].c 的作用



### 统计查询

find、wc、sort、

cat、tee、last



#### find命令

Linux find 命令用于在指定目录下查找文件和目录。



#### wc命令

Linux wc命令用于计算字数。

利用wc指令我们可以计算文件的Byte数、字数、或是列数，若不指定文件名称、或是所给予的文件名为"-"，则wc指令会从标准输入设备读取数据。



#### sort命令

Linux sort 命令用于将文本文件内容加以排序。

sort 可针对文本文件的内容，以行为单位来排序。



#### 重定向管道的输出到标准输出和指定的文件中

使用`tee`命令

如果您只关心标准输出

```shell
# 如果想同时打印到屏幕和文件里，可以这么写：
ls -l | tee -a lsls.log
# 如果想把错误输出也同时打印到屏幕和文件，可以这么写：
ls -l not_find_runoob 2>&1 | tee -a lsls.log
# 其中，2>&1 意思就是把标准报错也作为标准输出。写 crontab job 的时候常用。
```



#### cat

查看当前文件内容





#### tar 压缩/解压缩

对应 .tar 文件：

解包：tar xvf FileName.tar

打包：tar cvf FileName.tar DirName

 

.tar.gz 和 .tgz文件：

解压：tar -zxvf FileName.tar.gz

压缩：tar -zcvf FileName.tar.gz DirName







### vi编辑器的使用



打开文件：vi [文件名]

**命令模式（Command mode）：输入字符都作为命令来解释执行。不显示输入内容。**

**输入模式（Insert mode）：输入的任何字符都将作为文件内容被保存，并显示在屏幕上。**

**末行模式（Last line mode）：在屏幕最末行接收行命令输入，并执行。**

练习3种工模间的切换



#### 退出相关命令

`:q`、`:wq`、`:q!`



#### 增删查改

iao、dd、dw、x

#### 修改/替换命令

:s/str1/str2/ 用字符串 str2 替换行中首次出现的字符串 str1

:s/str1/str2/g 用字符串 str2 替换行中所有出现的字符串 str1

:%s/str1/str2/g 用字符串 str2 替换所有行中，所有出现的字符串 str1



#### 复制与撤销

`y`、`p`、`J`、`u`、`Ctrl r`

| 命令                                                         | 说明                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| y1G                                                          | 复制游标所在行到第一行的所有数据                             |
| yG                                                           | 复制游标所在行到最后一行的所有数据                           |
| y0                                                           | 复制光标所在的那个字符到该行行首的所有数据                   |
| y$                                                           | 复制光标所在的那个字符到该行行尾的所有数据                   |
| p, P                                                         | p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后， 那 10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。 (常用) |
| J                                                            | 将光标所在行与下一行的数据结合成同一行                       |
| c                                                            | 重复删除多个数据，例如向下删除 10 行，[ 10cj ]               |
| u                                                            | 复原前一个动作。(常用)                                       |
| [Ctrl]+r                                                     | 重做上一个动作。(常用)                                       |
| 这个 u 与 [Ctrl]+r 是很常用的指令！一个是复原，另一个则是重做一次～ 利用这两个功能按键，你的编辑，嘿嘿！很快乐的啦！ |                                                              |
| .                                                            | 不要怀疑！这就是小数点！意思是重复前一个动作的意思。 如果你想要重复删除、重复贴上等等动作，按下小数点『.』就好了！ (常用) |



### 用户管理

用户相关文件

`/ect/passwd` `etc/shadow` `/etc/group`

查看用户账号文件―>/etc/passwd，说明其一行的格式及各域作用

```shell
用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell
```

查看影子文件―>/etc/shadow，说明其中一行的格式及各域作用

```shell
登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志
```

查看组文件―>/etc/group，说明其中一行的格式及各域作用

```shell
组名:口令:组标识号:组内用户列表
```



#### 用户相关命令

`useradd` `passwd` `su` `userdel` `usermod`

1)	练习添加新用户命令：useradd；
2)	练习设置用户口令命令：passwd；
3)	练习切换用户身份命令：su；
4)	练习删除用户命令：userdel；
5)	练习修改用户信息命令：usermod；



#### 组相关命令

`groupadd` `groupdel` `groupmod` `gpasswd`

1)	练习添加组命令：groupadd；
2)	练习删除组命令：groupdel；
3)	练习修改组信息命令：groupmod；
4)	添加/删除组成员：gpasswd；



#### 文件相关命令

`chmod` `chown` `chgrp`

1)	修改权限命令：chmod
2)	改变文件拥有者：chown；
3)	更改文件所属的组：chgrp；



### 进程管理与定时任务

`ps` `top` 

`kill` `killall` `jobs` `fg` `bg` `nice` `renice`

使用top命令，实时显示系统各个进程的资源占用情况。说明输出信息中列的含意。

在top基本视图中，按h键进入另一个视图。

在top基本视图中，按f键进入另一个视图，在这里可以编辑基本视图中的显示字段。

在top基本视图中，按c键进入另一个视图,可以显示进程的路径。

在top基本视图中，按k键，可以在不退出top命令的情况下杀死某个正在运行的进程。

在top基本视图中，按b键，高亮显示当前正在运行的进程。



## 简答题：

### 什么是进程？

进程（process）是一个可并发执行的程序在一个数据集上的一次运行。（就是程序的一次运行过程）



### 进程与程序的区别？

- 程序是静态的概念，进程是动态的概念
- 程序可长期保存，进程有生命期和状态
- 进程包括程序，不同进程可对应同一程序代码



### 进程的三种状态？

- 运行态：进程占有CPU且正在运行；
- 就绪态：进程具备运行状态，等待系统分配CPU以便运行；
- 等待态：又叫阻塞态或睡眠态，指进程不具备运行条件，正在等待某个事件的完成；



### 如何后台启动进程？

- 在执行的命令后添加`$`符号



### fork函数的特点

- 一次调用，两次返回
- 父进程输出main,子进程输出child
- 使用gcc编译，并运行
- `fork()`系统调用，创建一个新的子进程





## 编程题



定时任务1

利用at设置一个任务自动化，在当天11：00钟，在根目录下自动创建一个abc目录，并进入到abc目录中，建立一个空的文件test，同时对该文件进行打包成test.tar;

```shell
at 11pm today
mkdir abc
cd abc
touch test
tar -czvf test.tar test
<EOT>
```



定时任务2

Cron应用：每周2,4,6早上3点重新启动系统

```shell
* * * * * myCommand # 每1分钟执行一次myCommand
crontab
0 3 * * 2,4,6 reboot # 每周2,4,6早上3点重新启动系统
# ctrl D 保存并退出
```

我们用**crontab -e**进入当前用户的工作表编辑，是常见的vim界面。每行是一条命令。

crontab的命令构成为 时间+动作，其时间有**分、时、日、月、周**五种，操作符有

- ***** 取值范围内的所有数字
- **/** 每过多少个数字
- **-** 从X到Z
- **，**散列数字



### Linux下GCC的使用

gcc

-o：指定生成文件的名称

-E：激活预处理。生成预处理文件（ .i 文件）

-S：激活预处理、编译。生成汇编代码（ .s 文件）

-c：激活预处理、编译、汇编。生成目标文件（ .o 文件）

-I：指定头文件目录

![image-20230513160005625](https://shinoimg.yyshino.top/img/202305131600144.png)



#### 多个文件编译

现在有 3 个文件，分别是 main.c，print.c，print.h

```sh
#1）多个文件一起编译：
gcc print.c main.c -o hello
# 执行生成文件

#2）分别编译各个源文件，再对编译后输出的目标文件（.o）链接
gcc -c print.c -o print.o
gcc -c main.c -o main.o
gcc print.o main.o -o hello
# 执行生成文件
```



如果头文件和源文件不在一同目录中，如何解决？

```sh
# 头文件所在目录：myInclude
 
# 主要是要加 -I 指定头文件目录：
gcc print.c main.c -o hello -I myInclude
# 运行文件
```



#### makefile（Makefile）

在使用gcc命令时，一个工程又有多个文件（比如100个文件），如果按照上述编译方法，往往需要输入很多指令，而且修改文件也不方便，因此引入makefile文件解决该问题。

```makefile
#main是需要生成的目标文件名，它依赖main.o print.o
main:main.o print.o
#gcc命令，生成main,语句前面要用TAB
	gcc main.o input.o cal.o -o main
#main.o是目标文件，依赖main.c文件，通过gcc -c main.c生成main.o文件
main.o:main.c
	gcc -c main.c
print.o:print.c
	gcc -c print.c
```



### Shell

```sh
#!/bin/bash
sum=0
for i in *.c
do
	# 输出总行数
	# lines=`wc -l < $i`
	# sum=`expr $sum + lines`
	
	# 输出.c文件个数
	sum=`expr $sum + 1`
done
echo $sum
```



变量的定义

- 命名只能使用**英文字母，数字和下划线，首个字符不能以数字开头**。
- 中间**不能有空格**，可以使用下划线 **_**。
- **不能使用标点符**号。
- **不能使用bash里的关键字**（可用help命令查看保留关键字）。



使用变量

`#!/bin/bash` `echo` `$` `unset` 

`(value0 value1 value2 value3 value4)` `${数组名[下标]}`

`$0 $1 $2 $3`

运算符

`+` `-` `*` `/` `%` `=` `==` `!=`

`-eq` `-ne` `-gt` `-lt` `-ge` `-le`

`!` `-o` `a`

`&&` `||`



输入/输出重定向

`>` `>>` `>&`

`<` `<<` `<&`



统计 users 文件的行数

`wc -l users`

