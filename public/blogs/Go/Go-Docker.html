<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | yyshino</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="icon" href="https://shinoimg.yyshino.top/img/avatar.png">
    <meta name="description" content="Docker入门">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.8186d926.css" as="style"><link rel="preload" href="/assets/js/app.f847ac77.js" as="script"><link rel="preload" href="/assets/js/4.a2985191.js" as="script"><link rel="preload" href="/assets/js/1.ab21178e.js" as="script"><link rel="preload" href="/assets/js/35.e8e97e79.js" as="script"><link rel="prefetch" href="/assets/js/10.7a41b707.js"><link rel="prefetch" href="/assets/js/11.67ab007f.js"><link rel="prefetch" href="/assets/js/12.6ea6713a.js"><link rel="prefetch" href="/assets/js/13.b74c74da.js"><link rel="prefetch" href="/assets/js/14.54a09238.js"><link rel="prefetch" href="/assets/js/15.7d112618.js"><link rel="prefetch" href="/assets/js/16.47375dd0.js"><link rel="prefetch" href="/assets/js/17.dba91b92.js"><link rel="prefetch" href="/assets/js/18.4f83352b.js"><link rel="prefetch" href="/assets/js/19.9425a33b.js"><link rel="prefetch" href="/assets/js/20.9315da2d.js"><link rel="prefetch" href="/assets/js/21.63ed1324.js"><link rel="prefetch" href="/assets/js/22.6d69c4e3.js"><link rel="prefetch" href="/assets/js/23.0ea99906.js"><link rel="prefetch" href="/assets/js/24.69b459d6.js"><link rel="prefetch" href="/assets/js/25.21236915.js"><link rel="prefetch" href="/assets/js/26.acd1aba5.js"><link rel="prefetch" href="/assets/js/27.3e733141.js"><link rel="prefetch" href="/assets/js/28.ef07a2cc.js"><link rel="prefetch" href="/assets/js/29.b1bb49cf.js"><link rel="prefetch" href="/assets/js/3.5e6ed713.js"><link rel="prefetch" href="/assets/js/30.6887e38a.js"><link rel="prefetch" href="/assets/js/31.b56e3ada.js"><link rel="prefetch" href="/assets/js/32.f658dbad.js"><link rel="prefetch" href="/assets/js/33.0ce6a286.js"><link rel="prefetch" href="/assets/js/34.c3bf414d.js"><link rel="prefetch" href="/assets/js/36.74338e28.js"><link rel="prefetch" href="/assets/js/37.e79375bb.js"><link rel="prefetch" href="/assets/js/38.f51c3f4e.js"><link rel="prefetch" href="/assets/js/39.4fe88c97.js"><link rel="prefetch" href="/assets/js/40.2d79211c.js"><link rel="prefetch" href="/assets/js/41.c0ac6ff0.js"><link rel="prefetch" href="/assets/js/42.ea9ced57.js"><link rel="prefetch" href="/assets/js/43.31954ca3.js"><link rel="prefetch" href="/assets/js/44.008e6ddb.js"><link rel="prefetch" href="/assets/js/45.abbbe775.js"><link rel="prefetch" href="/assets/js/46.41690f35.js"><link rel="prefetch" href="/assets/js/47.2b2cf031.js"><link rel="prefetch" href="/assets/js/48.75d0c07a.js"><link rel="prefetch" href="/assets/js/49.56f6376a.js"><link rel="prefetch" href="/assets/js/5.4fa9fb73.js"><link rel="prefetch" href="/assets/js/50.58386ae5.js"><link rel="prefetch" href="/assets/js/51.4ac39540.js"><link rel="prefetch" href="/assets/js/52.18bdecf6.js"><link rel="prefetch" href="/assets/js/53.70b66ff3.js"><link rel="prefetch" href="/assets/js/54.bf278bc1.js"><link rel="prefetch" href="/assets/js/55.da8073c4.js"><link rel="prefetch" href="/assets/js/56.eb968a10.js"><link rel="prefetch" href="/assets/js/57.89002db6.js"><link rel="prefetch" href="/assets/js/58.5e34111f.js"><link rel="prefetch" href="/assets/js/59.1dc3da29.js"><link rel="prefetch" href="/assets/js/6.12ccd017.js"><link rel="prefetch" href="/assets/js/60.aa458d4c.js"><link rel="prefetch" href="/assets/js/61.0c5ae029.js"><link rel="prefetch" href="/assets/js/62.39a00b5d.js"><link rel="prefetch" href="/assets/js/63.a1f7f2d0.js"><link rel="prefetch" href="/assets/js/64.aa0cca5d.js"><link rel="prefetch" href="/assets/js/65.24460708.js"><link rel="prefetch" href="/assets/js/66.9b7f7cbe.js"><link rel="prefetch" href="/assets/js/67.98ec7153.js"><link rel="prefetch" href="/assets/js/68.3a4f43a9.js"><link rel="prefetch" href="/assets/js/69.f02f411b.js"><link rel="prefetch" href="/assets/js/7.d982c05f.js"><link rel="prefetch" href="/assets/js/70.b865c5b0.js"><link rel="prefetch" href="/assets/js/71.86b9a3f1.js"><link rel="prefetch" href="/assets/js/72.283fedf0.js"><link rel="prefetch" href="/assets/js/73.488cad50.js"><link rel="prefetch" href="/assets/js/74.e0a35f7e.js"><link rel="prefetch" href="/assets/js/75.ddb243f6.js"><link rel="prefetch" href="/assets/js/76.fcee9082.js"><link rel="prefetch" href="/assets/js/77.cf1db4da.js"><link rel="prefetch" href="/assets/js/78.7ecf51f0.js"><link rel="prefetch" href="/assets/js/79.bdbb0a39.js"><link rel="prefetch" href="/assets/js/8.b289d849.js"><link rel="prefetch" href="/assets/js/80.07c86337.js"><link rel="prefetch" href="/assets/js/81.4c00510c.js"><link rel="prefetch" href="/assets/js/82.af9bfe81.js"><link rel="prefetch" href="/assets/js/83.52f19850.js"><link rel="prefetch" href="/assets/js/84.708aa72b.js"><link rel="prefetch" href="/assets/js/85.01589156.js"><link rel="prefetch" href="/assets/js/86.b6ee134b.js"><link rel="prefetch" href="/assets/js/87.3b4dd1ef.js"><link rel="prefetch" href="/assets/js/88.6ccdff75.js"><link rel="prefetch" href="/assets/js/89.74afb44d.js"><link rel="prefetch" href="/assets/js/9.62b73e12.js"><link rel="prefetch" href="/assets/js/90.8611ea7e.js"><link rel="prefetch" href="/assets/js/91.c784f2d8.js"><link rel="prefetch" href="/assets/js/92.24b3ec88.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8186d926.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>yyshino</h3> <p class="description" data-v-59e6cb88>Blog</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>yyshino</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://shinoimg.yyshino.top/img/avatar.png" alt="yyshino" class="logo"> <span class="site-name">yyshino</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      FrontEnd
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/Demo-优质整合.html" class="nav-link"><i class="undefined"></i>
  Demo-优质整合
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/Demo-自动化部署git项目.html" class="nav-link"><i class="undefined"></i>
  Demo-自动化部署git项目
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/FrontEnd-大前端.html" class="nav-link"><i class="undefined"></i>
  FrontEnd-大前端
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/FrontEnd-踩坑.html" class="nav-link"><i class="undefined"></i>
  FrontEnd-踩坑
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      CSS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/CSS/CSS-布局.html" class="nav-link"><i class="undefined"></i>
  CSS-布局
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      JavaScript
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-AJAX.html" class="nav-link"><i class="undefined"></i>
  JavaScript-AJAX
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-ES6.html" class="nav-link"><i class="undefined"></i>
  JavaScript-ES6
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-HTTP.html" class="nav-link"><i class="undefined"></i>
  JavaScript-HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-Koa.html" class="nav-link"><i class="undefined"></i>
  JavaScript-Koa
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-Node全栈.html" class="nav-link"><i class="undefined"></i>
  JavaScript-Node全栈
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-基础语法.html" class="nav-link"><i class="undefined"></i>
  JavaScript-基础语法
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-瀑布流布局.html" class="nav-link"><i class="undefined"></i>
  JavaScript-瀑布流布局
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-轮播图实现.html" class="nav-link"><i class="undefined"></i>
  JavaScript-轮播图实现
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-防抖与节流.html" class="nav-link"><i class="undefined"></i>
  JavaScript-防抖与节流
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-页面预加载.html" class="nav-link"><i class="undefined"></i>
  JavaScript-页面预加载
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Vue
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue-Diffing.html" class="nav-link"><i class="undefined"></i>
  Vue-Diffing
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue-源码分析.html" class="nav-link"><i class="undefined"></i>
  Vue-源码分析
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-快速开始一个项目.html" class="nav-link"><i class="undefined"></i>
  Vue2-快速开始一个项目
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-总结.html" class="nav-link"><i class="undefined"></i>
  Vue2-总结
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-电商项目01.html" class="nav-link"><i class="undefined"></i>
  Vue2-电商项目01
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-电商项目02.html" class="nav-link"><i class="undefined"></i>
  Vue2-电商项目02
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-电商项目03.html" class="nav-link"><i class="undefined"></i>
  Vue2-电商项目03
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/vue2-移动端路由切换动画.html" class="nav-link"><i class="undefined"></i>
  vue2-移动端路由切换动画
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue3-后台通用管理系统.html" class="nav-link"><i class="undefined"></i>
  Vue3-后台通用管理系统
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue3-晋级.html" class="nav-link"><i class="undefined"></i>
  Vue3-晋级
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Plugin
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-ECharts数据可视化.html" class="nav-link"><i class="undefined"></i>
  Plugin-ECharts数据可视化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Github个性化.html" class="nav-link"><i class="undefined"></i>
  Plugin-Github个性化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-git复习.html" class="nav-link"><i class="undefined"></i>
  Plugin-git复习
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Hexo个性化配置.html" class="nav-link"><i class="undefined"></i>
  Plugin-Hexo个性化配置
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Npm登录失败.html" class="nav-link"><i class="undefined"></i>
  Plugin-Npm登录失败
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Nvm的使用.html" class="nav-link"><i class="undefined"></i>
  Plugin-Nvm的使用
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-TyporaMarkdown.html" class="nav-link"><i class="undefined"></i>
  Plugin-TyporaMarkdown
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Vuepress中使用echarts.html" class="nav-link"><i class="undefined"></i>
  Plugin-Vuepress中使用echarts
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Vuepress添加导航.html" class="nav-link"><i class="undefined"></i>
  Plugin-Vuepress添加导航
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Webpack.html" class="nav-link"><i class="undefined"></i>
  Plugin-Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-WebSocket.html" class="nav-link"><i class="undefined"></i>
  Plugin-WebSocket
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-图床整理.html" class="nav-link"><i class="undefined"></i>
  Plugin-图床整理
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-模板引擎.html" class="nav-link"><i class="undefined"></i>
  Plugin-模板引擎
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-正则.html" class="nav-link"><i class="undefined"></i>
  Plugin-正则
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-网页部署.html" class="nav-link"><i class="undefined"></i>
  Plugin-网页部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-home"></i>
      主页
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="iconfont icon-cat2"></i>
  本站
</a></li><li class="dropdown-item"><!----> <a href="https://blog.yyshino.top/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-dog"></i>
  Hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      归档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/FrontEnd/" class="nav-link"><i class="iconfont reco-category"></i>
  分类
</a></li><li class="dropdown-item"><!----> <a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-game1"></i>
      Demo
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Mini Demo</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/extend/navigate.html" class="nav-link"><i class="iconfont icon-apps"></i>
  导航
</a></li><li class="dropdown-subitem"><a href="/docs/extend/accumulate.html" class="nav-link"><i class="iconfont icon-Vue"></i>
  休息一会
</a></li><li class="dropdown-subitem"><a href="/docs/extend/echarts.html" class="nav-link"><i class="iconfont icon-browser"></i>
  可视化Demo
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-tier-fill"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://e-admin.yyshino.top/#/screen" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-Vue"></i>
  电商平台实时监控系统
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://c-shop.yyshino.top/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-Vue"></i>
  电商平台
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>Vue3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Test
</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://nav.yyshino.top/#/light" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-fly1"></i>
  发现导航
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/0Shino0" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="https://shinoimg.yyshino.top/img/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    yyshino
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>77</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>58</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#3498db;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-csdn" style="color:#f26d6d;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-sf" style="color:#f26d6d;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-bilibili" style="color:#f8b26a;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      FrontEnd
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/Demo-优质整合.html" class="nav-link"><i class="undefined"></i>
  Demo-优质整合
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/Demo-自动化部署git项目.html" class="nav-link"><i class="undefined"></i>
  Demo-自动化部署git项目
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/FrontEnd-大前端.html" class="nav-link"><i class="undefined"></i>
  FrontEnd-大前端
</a></li><li class="dropdown-item"><!----> <a href="/blogs/FrontEnd/FrontEnd-踩坑.html" class="nav-link"><i class="undefined"></i>
  FrontEnd-踩坑
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      CSS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/CSS/CSS-布局.html" class="nav-link"><i class="undefined"></i>
  CSS-布局
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      JavaScript
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-AJAX.html" class="nav-link"><i class="undefined"></i>
  JavaScript-AJAX
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-ES6.html" class="nav-link"><i class="undefined"></i>
  JavaScript-ES6
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-HTTP.html" class="nav-link"><i class="undefined"></i>
  JavaScript-HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-Koa.html" class="nav-link"><i class="undefined"></i>
  JavaScript-Koa
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-Node全栈.html" class="nav-link"><i class="undefined"></i>
  JavaScript-Node全栈
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-基础语法.html" class="nav-link"><i class="undefined"></i>
  JavaScript-基础语法
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-瀑布流布局.html" class="nav-link"><i class="undefined"></i>
  JavaScript-瀑布流布局
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-轮播图实现.html" class="nav-link"><i class="undefined"></i>
  JavaScript-轮播图实现
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-防抖与节流.html" class="nav-link"><i class="undefined"></i>
  JavaScript-防抖与节流
</a></li><li class="dropdown-item"><!----> <a href="/blogs/JavaScript/JavaScript-页面预加载.html" class="nav-link"><i class="undefined"></i>
  JavaScript-页面预加载
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Vue
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue-Diffing.html" class="nav-link"><i class="undefined"></i>
  Vue-Diffing
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue-源码分析.html" class="nav-link"><i class="undefined"></i>
  Vue-源码分析
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-快速开始一个项目.html" class="nav-link"><i class="undefined"></i>
  Vue2-快速开始一个项目
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-总结.html" class="nav-link"><i class="undefined"></i>
  Vue2-总结
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-电商项目01.html" class="nav-link"><i class="undefined"></i>
  Vue2-电商项目01
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-电商项目02.html" class="nav-link"><i class="undefined"></i>
  Vue2-电商项目02
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue2-电商项目03.html" class="nav-link"><i class="undefined"></i>
  Vue2-电商项目03
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/vue2-移动端路由切换动画.html" class="nav-link"><i class="undefined"></i>
  vue2-移动端路由切换动画
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue3-后台通用管理系统.html" class="nav-link"><i class="undefined"></i>
  Vue3-后台通用管理系统
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Vue/Vue3-晋级.html" class="nav-link"><i class="undefined"></i>
  Vue3-晋级
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Plugin
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-ECharts数据可视化.html" class="nav-link"><i class="undefined"></i>
  Plugin-ECharts数据可视化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Github个性化.html" class="nav-link"><i class="undefined"></i>
  Plugin-Github个性化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-git复习.html" class="nav-link"><i class="undefined"></i>
  Plugin-git复习
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Hexo个性化配置.html" class="nav-link"><i class="undefined"></i>
  Plugin-Hexo个性化配置
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Npm登录失败.html" class="nav-link"><i class="undefined"></i>
  Plugin-Npm登录失败
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Nvm的使用.html" class="nav-link"><i class="undefined"></i>
  Plugin-Nvm的使用
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-TyporaMarkdown.html" class="nav-link"><i class="undefined"></i>
  Plugin-TyporaMarkdown
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Vuepress中使用echarts.html" class="nav-link"><i class="undefined"></i>
  Plugin-Vuepress中使用echarts
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Vuepress添加导航.html" class="nav-link"><i class="undefined"></i>
  Plugin-Vuepress添加导航
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-Webpack.html" class="nav-link"><i class="undefined"></i>
  Plugin-Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-WebSocket.html" class="nav-link"><i class="undefined"></i>
  Plugin-WebSocket
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-图床整理.html" class="nav-link"><i class="undefined"></i>
  Plugin-图床整理
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-模板引擎.html" class="nav-link"><i class="undefined"></i>
  Plugin-模板引擎
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-正则.html" class="nav-link"><i class="undefined"></i>
  Plugin-正则
</a></li><li class="dropdown-item"><!----> <a href="/blogs/Plugin/Plugin-网页部署.html" class="nav-link"><i class="undefined"></i>
  Plugin-网页部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-home"></i>
      主页
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link"><i class="iconfont icon-cat2"></i>
  本站
</a></li><li class="dropdown-item"><!----> <a href="https://blog.yyshino.top/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-dog"></i>
  Hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      归档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/FrontEnd/" class="nav-link"><i class="iconfont reco-category"></i>
  分类
</a></li><li class="dropdown-item"><!----> <a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-game1"></i>
      Demo
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Mini Demo</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/extend/navigate.html" class="nav-link"><i class="iconfont icon-apps"></i>
  导航
</a></li><li class="dropdown-subitem"><a href="/docs/extend/accumulate.html" class="nav-link"><i class="iconfont icon-Vue"></i>
  休息一会
</a></li><li class="dropdown-subitem"><a href="/docs/extend/echarts.html" class="nav-link"><i class="iconfont icon-browser"></i>
  可视化Demo
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-tier-fill"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://e-admin.yyshino.top/#/screen" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-Vue"></i>
  电商平台实时监控系统
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://c-shop.yyshino.top/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-Vue"></i>
  电商平台
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>Vue3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Test
</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://nav.yyshino.top/#/light" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-fly1"></i>
  发现导航
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/0Shino0" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blogs/Go/Go-Docker.html" aria-current="page" class="active sidebar-link">Docker</a></li><li><a href="/blogs/Go/Go-基础语法.html" class="sidebar-link">Go</a></li><li><a href="/blogs/Go/区块链-Hyperledger.html" class="sidebar-link">Hyperledger</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Docker</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>yyshino</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Docker</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>yyshino</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>12/1/2022</span></i> <i class="iconfont reco-eye" data-v-8a445198><span id="/blogs/Go/Go-Docker.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Docker</span></i></div></div> <div class="theme-reco-content content__default"><div class="custom-block tip"><p class="title">Docker快速入门</p><p>Docker常用命令 | Dockerfile构建镜像 | docker-compose构建多容器项目</p></div><p><img src="https://shinoimg.yyshino.top/img/202212011258419.jpeg" alt="docker"></p> <h2 id="应用容器"><a href="#应用容器" class="header-anchor">#</a> 应用容器</h2> <h3 id="基本介绍"><a href="#基本介绍" class="header-anchor">#</a> 基本介绍</h3> <ul><li>什么是应用容器</li></ul> <p>我们可以把它看成虚拟机，能在一台服务器上隔离出若干个互不干扰的环境。把自己的应用放入容器还可以进行版本管理、复制、分享、修改，就像管理普通的代码一样。它具有启动快、资源占用少、体积小、易操作等等。相比虚拟机有很多优势。</p> <ul><li>为什么要使用应用容器</li></ul> <p>因为软件更新发布及部署低效，过程繁琐且需要人工介入。环境一致性难以保证，不同环境之间迁移成本太高。有了应用容器部署可以很大程度解决上面的问题。</p> <ul><li>Docker 应用容器部署</li></ul> <p><code>Docker</code>是一个开源的应用容器引擎，目前有三大类。</p> <p>（1）提供一次性的环境。比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。</p> <p>（2）提供弹性的云服务。因为<code>Docker</code>容器可以随开随关，很适合动态扩容和缩容。</p> <p>（3）组建微服务架构。通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构</p> <h3 id="安装下载"><a href="#安装下载" class="header-anchor">#</a> 安装下载</h3> <ul><li><code>Mac</code></li></ul> <p><a href="https://docs.docker.com/desktop/install/mac-install/" target="_blank" rel="noopener noreferrer">在 Mac | 上安装码头工人文档 (docker.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li><code>Windows</code></li></ul> <p><a href="https://docs.docker.com/desktop/install/windows-install/" target="_blank" rel="noopener noreferrer">在 Windows | 上安装码头工人文档 (docker.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li><code>Linux</code></li></ul> <p><a href="https://docs.docker.com/desktop/install/linux-install/" target="_blank" rel="noopener noreferrer">在 Linux | 上安装码头工人文档 (docker.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="配置镜像"><a href="#配置镜像" class="header-anchor">#</a> 配置镜像</h3> <p>由于国内外网络问题，我们需要配置国内镜像源，提高拉去速度。</p> <ul><li>阿里云镜像</li></ul> <p>访问 <a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener noreferrer">容器镜像服务 (aliyun.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取你的阿里云镜像</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>    <span class="token punctuation">{</span>
      <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://nrxbdvhi.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Linux</code></p> <p>使用配置文件<code>/etc/docker/daemon.json</code>（没有时新建该文件）。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">vim</span> /etc/docker/daemon.json
    <span class="token comment"># 添加如下内容，可以自己替换。默认地址是我的创建的</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;registry-mirrors&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://mr63yffu.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>重启<code>Docker Daemon</code>即可。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    systemctl daemon-reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Windows</code></p> <p>在如图所示位置添加配置镜像</p> <p><img src="https://shinoimg.yyshino.top/img/202212011254446.png" alt="添加配置镜像"></p> <h3 id="架构概念"><a href="#架构概念" class="header-anchor">#</a> 架构概念</h3> <p>通过下图可以得知，<code>Docker</code>在运行时分为<code>Docker引擎（服务端守护进程）</code>和<code>客户端工具</code>，我们日常使用各种<code>docker命令</code>，其实就是在使用<code>客户端工具</code>与<code>Docker</code>引擎进行交互。</p> <p><img src="https://shinoimg.yyshino.top/img/202212011258419.jpeg" alt="docker"></p> <h4 id="client-客户端"><a href="#client-客户端" class="header-anchor">#</a> Client 客户端</h4> <p><code>Docker</code>是一个客户端-服务器（C/S）架构程序。<code>Docker</code>客户端只需要向<code>Docker</code>服务器或者守护进程发出请求，服务器或者守护进程将完成所有工作并返回结果。<code>Docker</code>提供了一个命令行工具<code>Docker</code>以及一整套<code>RESTful API</code>。你可以在同一台宿主机上运行<code>Docker</code>守护进程和客户端，也可以从本地的<code>Docker</code>客户端连接到运行在另一台宿主机上的远程<code>Docker</code>守护进程。</p> <h4 id="host-主机-docker-引擎"><a href="#host-主机-docker-引擎" class="header-anchor">#</a> Host 主机(Docker 引擎)</h4> <p>一个物理或者虚拟的机器用于执行<code>Docker</code>守护进程和容器。</p> <h4 id="image-镜像"><a href="#image-镜像" class="header-anchor">#</a> Image 镜像</h4> <p>什么是<code>Docker</code>镜像？简单的理解，<code>Docker</code>镜像就是一个<code>Linux</code>的<code>文件系统（Root FileSystem）</code>，这个文件系统里面包含可以运行在<code>Linux</code>内核的程序以及相应的数据。</p> <p>通过镜像启动一个容器，一个镜像就是一个可执行的包，其中包括运行应用程序所需要的所有内容：包含代码，运行时间，库，环境变量和配置文件等。</p> <p>Docker 把 App 文件打包成为一个镜像，并且采用类似多次快照的存储技术，可以实现：</p> <ul><li>多个<code>App</code>可以共用相同的底层镜像（初始的操作系统镜像）；</li> <li><code>App</code>运行时的<code>IO</code>操作和镜像文件隔离；</li> <li>通过挂载包含不同配置/数据文件的目录或者卷（Volume），单个<code>App</code>镜像可以用来运行无数个不同业务的容器。</li></ul> <h4 id="container-容器"><a href="#container-容器" class="header-anchor">#</a> Container 容器</h4> <p>镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</p> <table><thead><tr><th>Docker</th> <th style="text-align:right;">面向对象</th></tr></thead> <tbody><tr><td>镜像</td> <td style="text-align:right;">类</td></tr> <tr><td>容器</td> <td style="text-align:right;">对象</td></tr></tbody></table> <h4 id="像分层"><a href="#像分层" class="header-anchor">#</a> 像分层</h4> <p>Docker 支持通过扩展现有镜像，创建新的镜像。实际上，<code>Docker Hub</code>中<code>99%</code>的镜像都是通过在<code>base</code>镜像中安装和配置需要的软件构建出来的。</p> <p><img src="https://shinoimg.yyshino.top/img/202212011257616.png" alt="docker"></p> <p>从上图可以看到，新镜像是从<code>base</code>镜像一层一层叠加生成的。每安装一个软件，就在现有镜像的基础上增加一层。</p> <p>镜像分层最大的一个好处就是共享资源。比如说有多个镜像都从相同的<code>base</code>镜像构建而来，那么<code>Docker Host</code>只需在磁盘上保存一份<code>base</code>镜像；同时内存中也只需加载一份<code>base</code>镜像，就可以为所有容器服务了。而且镜像的每一层都可以被共享。</p> <p>如果多个容器共享一份基础镜像，当某个容器修改了基础镜像的内容，比如<code>/etc</code>下的文件，这时其他容器的<code>/etc</code>是不会被修改的，修改只会被限制在单个容器内。这就是容器<code>Copy-on-Write</code>特性。</p> <h4 id="volume-数据卷"><a href="#volume-数据卷" class="header-anchor">#</a> Volume 数据卷</h4> <p>实际上我们的容器就好像是一个简易版的操作系统，只不过系统中只安装了我们的程序运行所需要的环境，前边说到我们的容器是可以删除的，那如果删除了，容器中的程序产生的需要持久化的数据怎么办呢？容器运行的时候我们可以进容器去查看，容器一旦删除就什么都没有了。</p> <p>所以数据卷就是来解决这个问题的，是用来将数据持久化到我们宿主机上，与容器间实现数据共享，简单的说就是将宿主机的目录映射到容器中的目录，应用程序在容器中的目录读写数据会同步到宿主机上，这样容器产生的数据就可以持久化了，比如我们的数据库容器，就可以把数据存储到我们宿主机上的真实磁盘中。</p> <h4 id="注册中心registry-注册中心"><a href="#注册中心registry-注册中心" class="header-anchor">#</a> 注册中心Registry 注册中心</h4> <p><code>Docker</code>用<code>Registry</code>来保存用户构建的镜像。<code>Registry</code>分为公共和私有两种。<code>Docker</code>公司运营公共的<code>Registry</code>叫做<code>Docker Hub</code>。用户可以在<code>Docker Hub</code>注册账号，分享并保存自己的镜像。</p> <p><code>Docker</code>公司提供了公共的镜像仓库<code>https://hub.docker.com</code>（Docker 称之为 Repository）提供了庞大的镜像集合供使用。</p> <p>一个<code>Docker Registry</code>中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。</p> <p>通常，一个仓库会包含同一个软件不同版本的镜像，而标签对应该软件的各个版本。我们可以通过<code>&lt;仓库名&gt;:&lt;标签&gt;</code>的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以<code>latest</code>作为默认标签。</p> <p><img src="https://shinoimg.yyshino.top/img/202212011258049.png" alt="alibaba-docker"></p> <h3 id="镜像命令"><a href="#镜像命令" class="header-anchor">#</a> 镜像命令</h3> <p>官方文档：<code>https://docs.docker.com/reference</code></p> <h4 id="查看镜像"><a href="#查看镜像" class="header-anchor">#</a> 查看镜像</h4> <p>执行命令：<code>docker images</code></p> <table><thead><tr><th>属性</th> <th style="text-align:right;">说明</th></tr></thead> <tbody><tr><td>REPOSITORY</td> <td style="text-align:right;">镜像在仓库中的名称</td></tr> <tr><td>TAG</td> <td style="text-align:right;">镜像标签</td></tr> <tr><td>IMAGE ID</td> <td style="text-align:right;">镜像 ID</td></tr> <tr><td>CREATED</td> <td style="text-align:right;">镜像的创建日期</td></tr> <tr><td>SIZE</td> <td style="text-align:right;">镜像大小</td></tr></tbody></table> <p>这些镜像都是存储在<code>Docker</code>宿主机的<code>/var/lib/docker</code>目录下。</p> <h4 id="搜索镜像"><a href="#搜索镜像" class="header-anchor">#</a> 搜索镜像</h4> <p>如果你需要从网络中查找需要的镜像，可以通过以下命令搜索。</p> <p>执行命令：<code>docker search 镜像名称</code></p> <table><thead><tr><th>属性</th> <th style="text-align:right;">说明</th></tr></thead> <tbody><tr><td>NAME</td> <td style="text-align:right;">镜像名称</td></tr> <tr><td>DESCRIPTION</td> <td style="text-align:right;">镜像描述</td></tr> <tr><td>STARS</td> <td style="text-align:right;">用户评价</td></tr> <tr><td>OFFICIAL</td> <td style="text-align:right;">是否为官方构建</td></tr> <tr><td>AUTOMATED</td> <td style="text-align:right;">Docker Hub 自动构建</td></tr></tbody></table> <h4 id="拉取镜像"><a href="#拉取镜像" class="header-anchor">#</a> 拉取镜像</h4> <p>拉取镜像就是从中央仓库下载镜像到本地。</p> <p>执行命令：<code>docker pull 镜像名称</code></p> <p>如果不声明<code>tag</code>镜像标签信息则默认拉取<code>latest</code>版本。</p> <h4 id="删除镜像"><a href="#删除镜像" class="header-anchor">#</a> 删除镜像</h4> <p>按镜像<code>ID</code>删除单个镜像。</p> <p>执行命令：<code>docker rmi 镜像ID</code></p> <p>按镜像<code>ID</code>删除多个镜像。</p> <p>执行命令：<code>docker rmi 镜像ID 镜像ID 镜像ID</code></p> <p><code>docker images -q</code>可以查询到所有镜像的<code>ID</code>，通过组合命令可以实现删除所有镜像的操作。</p> <p>执行命令：<code>docker rmi docker images -q</code></p> <p>::: Tips</p> <p>注意：如果通过某个镜像创建了容器，则该镜像无法删除。
解决办法：先删除镜像中的容器，再删除该镜像。</p> <p>:::</p> <h3 id="容器命令"><a href="#容器命令" class="header-anchor">#</a> 容器命令</h3> <h4 id="查看容器"><a href="#查看容器" class="header-anchor">#</a> 查看容器</h4> <table><thead><tr><th>容器命令</th> <th>描述</th></tr></thead> <tbody><tr><td><code>docker ps</code></td> <td>查看正在运行的容器。</td></tr> <tr><td><code>docker ps -f status=exited</code></td> <td>查看停止的容器。</td></tr> <tr><td><code>docker ps -a</code></td> <td>查看所有容器（包括运行和停止）。</td></tr> <tr><td><code>docker ps -l</code></td> <td>查看最后一次运行的容器。</td></tr> <tr><td><code>docker ps -n 5</code></td> <td>列出最近创建的 n 个容器。</td></tr></tbody></table> <p>概念介绍</p> <table><thead><tr><th>属性</th> <th style="text-align:right;">说明</th></tr></thead> <tbody><tr><td>CONTAINER ID</td> <td style="text-align:right;">容器 ID</td></tr> <tr><td>IMAGE</td> <td style="text-align:right;">所属镜像</td></tr> <tr><td>COMMAND</td> <td style="text-align:right;">启动容器时运行的命令</td></tr> <tr><td>CREATED</td> <td style="text-align:right;">创建时间</td></tr> <tr><td>STATUS</td> <td style="text-align:right;">容器状态</td></tr> <tr><td>PORTS</td> <td style="text-align:right;">端口</td></tr> <tr><td>NAMES</td> <td style="text-align:right;">容器名称</td></tr></tbody></table> <h4 id="创建与启动容器"><a href="#创建与启动容器" class="header-anchor">#</a> 创建与启动容器</h4> <p><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></p> <table><thead><tr><th>容器命令</th> <th>说明</th></tr></thead> <tbody><tr><td><code>docker run -it --name 容器名称 镜像名称:标签 /bin/bash</code></td> <td>表示运行容器</td></tr></tbody></table> <h4 id="创建并进入容器"><a href="#创建并进入容器" class="header-anchor">#</a> 创建并进入容器</h4> <p><code>docker run -it --name 容器名称 镜像名称:标签 /bin/bash</code></p> <table><thead><tr><th>容器命令</th> <th style="text-align:right;">说明</th></tr></thead> <tbody><tr><td>CONTAINER ID</td> <td style="text-align:right;">容器 ID</td></tr> <tr><td>IMAGE</td> <td style="text-align:right;">所属镜像</td></tr> <tr><td>COMMAND</td> <td style="text-align:right;">启动容器时运行的命令</td></tr> <tr><td>CREATED</td> <td style="text-align:right;">创建时间</td></tr> <tr><td>STATUS</td> <td style="text-align:right;">容器状态</td></tr> <tr><td>PORTS</td> <td style="text-align:right;">端口</td></tr> <tr><td>NAMES</td> <td style="text-align:right;">容器名称</td></tr></tbody></table> <h4 id="其他命令"><a href="#其他命令" class="header-anchor">#</a> 其他命令</h4> <table><thead><tr><th>容器命令</th> <th style="text-align:right;">说明</th></tr></thead> <tbody><tr><td><code>exit</code></td> <td style="text-align:right;">退出当前容器</td></tr> <tr><td><code>docker run -di --name 容器名称 镜像名称:标签</code></td> <td style="text-align:right;">守护式方式创建容器</td></tr> <tr><td><code>docker exec -it 容器名称|容器ID /bin/bash</code></td> <td style="text-align:right;">登录守护式容器方式</td></tr> <tr><td><code>docker stop 容器名称|容器ID</code></td> <td style="text-align:right;">停止容器</td></tr> <tr><td><code>docker start 容器名称|容器ID</code></td> <td style="text-align:right;">启动容器</td></tr></tbody></table> <h4 id="文件拷贝"><a href="#文件拷贝" class="header-anchor">#</a> 文件拷贝</h4> <table><thead><tr><th>容器命令</th> <th>说明</th></tr></thead> <tbody><tr><td><code>docker cp 需要拷贝的文件或目录 容器名称:容器目录</code></td> <td>将文件拷贝到容器内</td></tr> <tr><td><code>docker cp 容器名称:容器目录 需要拷贝的文件或目录</code></td> <td>将文件从容器内拷贝出来</td></tr></tbody></table> <h4 id="目录挂载"><a href="#目录挂载" class="header-anchor">#</a> 目录挂载</h4> <p>我们可以在创建容器的时候，将宿主机的目录与容器内的目录进行映射，这样我们就可以通过修改宿主机某个目录的文件从而去影响容器，而且这个操作是双向绑定的，也就是说容器内的操作也会影响到宿主机，实现备份功能。</p> <p>但是容器被删除的时候，宿主机的内容并不会被删除。如果多个容器挂载同一个目录，其中一个容器被删除，其他容器的内容也不会受到影响。</p> <p>创建容器添加<code>-v</code>参数，格式为宿主机目录:容器目录，例如：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">-v</span> /home/ruoyi/data:/usr/local/data <span class="token parameter variable">--name</span> centos7-01 centos:7

    <span class="token comment"># 多目录挂载</span>
    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">-v</span> /宿主机目录:/容器目录 <span class="token parameter variable">-v</span> /宿主机目录2:/容器目录2 镜像名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>::: Tips</p> <p>目录挂载操作可能会出现权限不足的提示。这是因为<code>CentOS7</code>中的安全模块<code>SELinux</code>把权限禁掉了，在<code>docker run</code>时通过<code>--privileged=true</code>给该容器加权限来解决挂载的目录没有权限的问题。</p> <p>:::</p> <table><thead><tr><th>容器命令</th> <th>说明</th></tr></thead> <tbody><tr><td><code>docker run -di -v /usr/local/data --name centos7-02 centos:7</code></td> <td><strong>匿名挂载</strong>只需要写容器目录即可，容器外对应的目录会在<code>/var/lib/docker/volumes</code>中生成。</td></tr> <tr><td><code>docker run -di -v docker_centos_data:/usr/local/data --name centos7-03 centos:7</code></td> <td><strong>具名挂载</strong>就是给数据卷起了个名字，容器外对应的目录会在<code>/var/lib/docker/volume</code>中生成。</td></tr> <tr><td><code>docker run -di -v /宿主机目录:/容器目录 -v /宿主机目录2:/容器目录2 镜像名</code></td> <td><strong>指定目录挂载</strong> 之前挂载方式就属于指定目录挂载，这种方式的挂载不会在<code>/var/lib/docker/volume</code>目录生成内容</td></tr> <tr><td><code>docker volume ls</code></td> <td>查看 volume 数据卷信息</td></tr> <tr><td><code>docker volume inspect 数据卷名称</code></td> <td>可以查看该数据卷对应宿主机的目录地址</td></tr> <tr><td><code>docker inspect 容器ID或名称</code></td> <td>在返回的<code>JSON</code>节点中找到<code>Mounts</code>，可以查看详细的数据挂载信息</td></tr> <tr><td><code>docker run -it -v /宿主机目录:/容器目录:ro 镜像名</code></td> <td>只读。只能通过修改宿主机内容实现对容器的数据管理。</td></tr> <tr><td><code>docker run -it -v /宿主机目录:/容器目录:rw 镜像名</code></td> <td>读写，默认。宿主机和容器可以双向操作数据。</td></tr></tbody></table> <h4 id="删除容器"><a href="#删除容器" class="header-anchor">#</a> 删除容器</h4> <table><thead><tr><th>容器命令</th> <th>说明</th></tr></thead> <tbody><tr><td><code>docker rm 容器名称|容器ID</code></td> <td>删除指定容器</td></tr> <tr><td><code>docker rm 容器名称|容器ID 容器名称|容器ID</code></td> <td>容器ID 容器名称</td></tr></tbody></table> <h4 id="查看容器-ip-地址"><a href="#查看容器-ip-地址" class="header-anchor">#</a> 查看容器 IP 地址</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>
<span class="token comment"># 容器命令                                                     说明</span>
<span class="token function">docker</span> inspect 容器名称<span class="token operator">|</span>容器ID                             <span class="token comment"># 查看容器的元信息</span>
<span class="token function">docker</span> inspect <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">'{{.NetworkSettings.IPAddress}}'</span> 容器名称<span class="token operator">|</span>容器ID` <span class="token comment"># 直接输出 IP 地址</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="应用部署"><a href="#应用部署" class="header-anchor">#</a> 应用部署</h3> <h4 id="nacos"><a href="#nacos" class="header-anchor">#</a> Nacos</h4> <table><thead><tr><th>Nacos部署命令</th> <th>说明</th></tr></thead> <tbody><tr><td><code>docker pull nacos/nacos-server</code></td> <td>拉取官方<code>nacos</code>镜像</td></tr> <tr><td><code>docker run --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server</code></td> <td>启动<code>nacos</code></td></tr></tbody></table> <ul><li><code>MODE=standalone</code>表示单机启动</li></ul> <h4 id="nginx"><a href="#nginx" class="header-anchor">#</a> Nginx</h4> <p>拉取官方<code>nginx</code>镜像</p> <p>执行命令：<code>docker pull nginx</code></p> <p>创建<code>Nginx</code>容器。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将容器内的配置文件拷贝到指定目录（请先提前创建好目录）。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 创建目录</span>
    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/ruoyi/nginx

    <span class="token comment"># 将容器内的配置文件拷贝到指定目录</span>
    <span class="token function">docker</span> <span class="token function">cp</span> nginx:/etc/nginx /home/ruoyi/nginx/conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>终止并删除容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> stop nginx
    <span class="token function">docker</span> <span class="token function">rm</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>创建<code>Nginx</code>容器，并将容器中的<code>/etc/nginx</code>目录和宿主机的<code>/home/ruoyi/nginx/conf</code>目录进行挂载。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-v</span> /home/ruoyi/nginx/conf:/etc/nginx nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="mysql"><a href="#mysql" class="header-anchor">#</a> Mysql</h4> <p>拉取官方<code>mysql5.7</code>镜像</p> <p>执行命令：<code>docker pull mysql:5.7</code></p> <ul><li>创建容器</li></ul> <p>在本地创建<code>mysql</code>的映射目录</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/mysql/data /home/mysql/logs /home/mysql/conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建容器，将数据、日志、配置文件映射到本机</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-v</span> /home/mysql/conf:/etc/mysql/conf.d <span class="token parameter variable">-v</span> /home/mysql/logs:/logs <span class="token parameter variable">-v</span> /home/mysql/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>password <span class="token parameter variable">-d</span> mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>-d: 后台运行容器</li> <li>-p 将容器的端口映射到本机的端口</li> <li>-v 将主机目录挂载到容器的目录</li> <li>-e 设置参数</li></ul> <p>进入容器/执行命令：<code>docker exec -it mysql /bin/bash</code></p> <h3 id="redis"><a href="#redis" class="header-anchor">#</a> Redis</h3> <p>拉取官方<code>redis</code>镜像</p> <p>执行命令：<code>docker pull redis</code></p> <p>创建容器。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> redis <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>连接容器中的<code>Redis</code>时，只需要连接宿主机的<code>IP + 指定的映射端口</code>即可。</p> <h2 id="镜像构建"><a href="#镜像构建" class="header-anchor">#</a> 镜像构建</h2> <p>Docker 支持自己构建镜像，还支持将自己构建的镜像上传至公共仓库</p> <table><thead><tr><th>容器命令</th> <th>说明</th></tr></thead> <tbody><tr><td><code>docker commit</code></td> <td>从容器创建一个新的镜像</td></tr> <tr><td><code>docker build</code></td> <td>配合<code>Dockerfile</code>文件创建镜像</td></tr></tbody></table> <h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <p>接下来我们通过基础镜像<code>centos:7</code>，在该镜像中安装<code>jdk</code>和<code>tomcat</code>以后将其制作为一个新的镜像<code>mycentos:7</code>。</p> <p>创建镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 拉取镜像</span>
    <span class="token function">docker</span> pull centos:7

    <span class="token comment"># 创建容器</span>
    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> centos7 centos:7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>拷贝资源</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 将宿主机的jdk和tocat拷贝至容器</span>
    <span class="token function">docker</span> <span class="token function">cp</span> jdk-8u111-linux-x64.tar.gz centos7:/root

    <span class="token function">docker</span> <span class="token function">cp</span> apache-tomcat-8.5.27.tar.gz centos7:/root
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>安装资源</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 进入容器</span>
    <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> centos7 /bin/bash

    <span class="token comment"># 切换至 /root目录</span>
    <span class="token builtin class-name">cd</span> root/

    <span class="token comment"># 创建java和tomcat目录</span>
    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/local/java
    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/local/tomcat

    <span class="token comment"># 将jdk和tomcat解压至容器 /usr/local/java 和 /usr/local/tomcat/</span>
    <span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> jdk-8u111-linux-x64.tar.gz <span class="token parameter variable">-C</span> /usr/local/java/
    <span class="token function">tar</span> <span class="token parameter variable">-axvf</span> apache-tomcat-8.5.27.gz <span class="token parameter variable">-C</span> /usr/local/tomcat/

    <span class="token comment"># 配置jdk环境变量</span>
    <span class="token function">vi</span> /etc/profile

    <span class="token comment"># 在环境变量文件中添加以下内容</span>
    <span class="token builtin class-name">export</span> JAVA_HOME <span class="token operator">=</span> /usr/local/java/jdk1.8.0_111/
    <span class="token builtin class-name">export</span> <span class="token environment constant">PATH</span> <span class="token operator">=</span> <span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin

    <span class="token comment"># 重新加载环境变量文件</span>
    <span class="token builtin class-name">source</span> /etc/profile

    <span class="token comment"># 测试环境变量是否配置成功</span>
    <span class="token function">java</span> <span class="token parameter variable">-version</span>

    <span class="token comment"># 删除容器内 jdk和 tomcat</span>
    <span class="token function">rm</span> jdk-8u111-linux-x64.tar.gz apache-tomcat-8.5.27.tar.gz <span class="token parameter variable">-rf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>构建镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> commit <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER <span class="token punctuation">[</span>REPOSITORY<span class="token punctuation">[</span>:TAG<span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token function">docker</span> commit <span class="token parameter variable">-a</span><span class="token operator">=</span><span class="token string">&quot;ruoyi&quot;</span> <span class="token parameter variable">-m</span><span class="token operator">=</span><span class="token string">&quot;jdk8 and tomcat8&quot;</span> centos7 mycentos:7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>-a：提交的镜像作者；</li> <li>-c：使用 Dockerfile 指令来创建镜像；</li> <li>-m：提交时的说明文字；</li> <li>-p：在 commit 时，将容器暂停。</li></ul> <p>使用构建的镜像创建容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 创建容器</span>
    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> mycentos7 <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 mycentos:7

    <span class="token comment"># 进入容器</span>
    <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mycentos7 /bin/bash

    <span class="token comment"># 重新加载配置文件</span>
    <span class="token builtin class-name">source</span> /etc/profile

    <span class="token comment"># 测试java环境变量</span>
    <span class="token function">java</span> <span class="token parameter variable">-version</span>

    <span class="token comment"># 启动 tomcat</span>
    /usr/local/tomcat/apache-tomcat-8.5.27/bin/startup.sh
    <span class="token comment"># 访问http://{ip}:{port}，看到tomcat页面说明环境表示成功</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h3> <p>在<code>Docker</code>中构建镜像最常用的方式，就是使用<code>Dockerfile</code>。<code>Dockerfile</code>是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。官方文档：<code>https://docs.docker.com/engine/reference/builder</code></p> <h4 id="dockerfile-常用指令"><a href="#dockerfile-常用指令" class="header-anchor">#</a> Dockerfile 常用指令</h4> <table><thead><tr><th>指令</th> <th>语法</th> <th style="text-align:right;">说明</th></tr></thead> <tbody><tr><td>FROM</td> <td><code>FROM &lt;image&gt;:&lt;tag&gt;</code></td> <td style="text-align:right;">指明构建的新镜像是来自于哪个基础镜像，如果没有选择<code>tag</code>，那么默认值为<code>latest</code></td></tr> <tr><td>MAINTAINER</td> <td><code>MAINTAINER &lt;name&gt;</code></td> <td style="text-align:right;">指明镜像维护者及其联系方式（一般是邮箱地址）。官方说明已过时，推荐使用<code>LABEL</code></td></tr> <tr><td>LABEL</td> <td><code>LABEL &lt;key&gt;=&lt;value&gt; ...</code></td> <td style="text-align:right;">功能是为镜像指定标签。也可以使用<code>LABEL</code>来指定镜像作者</td></tr> <tr><td>RUN</td> <td><code>RUN &lt;command&gt;</code></td> <td style="text-align:right;">构建镜像时运行的<code>Shell</code>命令，比如构建的新镜像中我们想在<code>/usr/local</code>目录下创建一个<code>java</code>目录</td></tr> <tr><td>ADD</td> <td><code>ADD &lt;src&gt;... &lt;dest&gt;</code></td> <td style="text-align:right;">拷贝文件或目录到镜像中。src 可以是一个本地文件，还可以是一个<code>url</code>。然后自动下载和解压</td></tr> <tr><td>COPY</td> <td><code>COPY &lt;src&gt;... &lt;dest&gt;</code></td> <td style="text-align:right;">拷贝文件或目录到镜像中。用法同 ADD，只是不支持自动下载和解压</td></tr> <tr><td>EXPOSE</td> <td><code>EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</code></td> <td style="text-align:right;">暴露容器运行时的监听端口给外部，可以指定端口是监听 TCP 还是 UDP，如果未指定协议，则默认为 TCP</td></tr> <tr><td>ENV</td> <td><code>ENV &lt;key&gt;=&lt;value&gt; ...</code></td> <td style="text-align:right;">设置容器内环境变量</td></tr> <tr><td>CMD</td> <td><code>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</code></td> <td style="text-align:right;">启动容器时执行的<code>Shell</code>命令。在<code>Dockerfile</code>中只能有一条<code>CMD</code>指令。如果设置了多条<code>CMD</code>，只有最后一条会生效</td></tr> <tr><td>ENTRYPOINT</td> <td><code>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code></td> <td style="text-align:right;">启动容器时执行的 Shell 命令，同 CMD 类似，不会被 docker run 命令行指定的参数所覆盖，如果设置了多条<code>ENTRYPOINT</code>，只有最后一条会生效</td></tr> <tr><td>WORKDIR</td> <td><code>WORKDIR param</code></td> <td style="text-align:right;">为 RUN、CMD、ENTRYPOINT 以及 COPY 和 AND 设置工作目录</td></tr> <tr><td>VOLUME</td> <td><code>VOLUME [&quot;param&quot;]</code></td> <td style="text-align:right;">指定容器挂载点到宿主机自动生成的目录或其他容器。一般的使用场景为需要持久化存储数据时</td></tr></tbody></table> <h4 id="构建镜像"><a href="#构建镜像" class="header-anchor">#</a> 构建镜像</h4> <p><code>Dockerfile</code>文件编写好以后，真正构建镜像时需要通过<code>docker build</code>命令。</p> <p><code>docker build</code>命令用于使用<code>Dockerfile</code>创建镜像。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 使用当前目录的 Dockerfile 创建镜像</span>
    <span class="token function">docker</span> build <span class="token parameter variable">-t</span> mycentos:7 <span class="token builtin class-name">.</span>

    <span class="token comment"># 通过 -f Dockerfile 文件的位置创建镜像</span>
    <span class="token function">docker</span> build <span class="token parameter variable">-f</span> /home/ruoyi/docker/Dockerfile <span class="token parameter variable">-t</span> mycentos:7 <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="dockerfile实践"><a href="#dockerfile实践" class="header-anchor">#</a> Dockerfile实践</h5> <p>接下来我们通过基础镜像<code>centos:7</code>，在该镜像中安装<code>jdk</code>和<code>tomcat</code>以后将其制作为一个新的镜像<code>mycentos:7</code></p> <p>创建目录，编写<code>Dockerfile</code>文件</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/local/<span class="token variable"><span class="token variable">`</span>dockerfile<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行命令：<code>vi Dockerfile</code>,写入信息</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 指明构建的新镜像是来自于`centos:7`基础镜像</span>
    FROM centos:7
    <span class="token comment"># 通过镜像标签声明了作者信息</span>
    LABEL maintainer <span class="token operator">=</span> <span class="token string">&quot;ruoyi.vip&quot;</span>

    <span class="token comment"># 设置工作目录</span>
    WORKDIR /usr/local
    <span class="token comment"># 新镜像构建成功以后创建指定目录</span>
    RUN <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/local/java <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> - p /usr/local/tomcat
    <span class="token comment"># 拷贝文件到镜像中并解压</span>
    ADD jdk-8u111-linux-x64.tar.gz /usr/local/java
    ADD apache-tomcat-8.5.27.tar.gz /usr/local/tomcat
    <span class="token comment"># 暴露容器运行时的8080监听端口给外部</span>
    EXPOSE <span class="token number">8080</span>
    <span class="token comment"># 设置容器内 JAVA_HOME 环境变量</span>
    ENV JAVA_HOME /usr/local/java/jdk1.8.0_111
    ENV <span class="token environment constant">PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin
    <span class="token comment"># 启动容器时启动tomcat</span>
    CMD <span class="token punctuation">[</span><span class="token string">&quot;/usr/local/tomcat/apache-tomcat-8.5.27/bin/catalina.sh&quot;</span>, <span class="token string">&quot;run&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>构建镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> build <span class="token parameter variable">-f</span> /home/ruoyi/docker/Dockerfile <span class="token parameter variable">-t</span> mycentos:test <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> mycentos <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 mycentos:test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>进入容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mycentos7 /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="镜像构建历史"><a href="#镜像构建历史" class="header-anchor">#</a> 镜像构建历史</h5> <p><code>docker history 镜像名称:标签|ID</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> <span class="token function">history</span> mycentos:7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="镜像仓库"><a href="#镜像仓库" class="header-anchor">#</a> 镜像仓库</h3> <p>我们使用的镜像都是从<code>DockerHub</code>公共仓库拉取的，我们也学习了如何制作自己的镜像，但是通过<code>tar</code>包的方式实现镜像的备份恢复迁移对于团队协作开发并不是特别友好，我们也可以将镜像推送至<code>DockerHub</code>仓库方便使用。</p> <p>温馨提示：如果构建的镜像内携带了项目数据，建议还是使用私有仓库比较好。</p> <h4 id="注册账号"><a href="#注册账号" class="header-anchor">#</a> 注册账号</h4> <p>官网 <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub 官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="登录账号"><a href="#登录账号" class="header-anchor">#</a> 登录账号</h4> <p><code>docker login</code></p> <h4 id="推送镜像至仓库"><a href="#推送镜像至仓库" class="header-anchor">#</a> 推送镜像至仓库</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> tag hello-world:latest ruoyivip/test-hello-world:1.0.0
    <span class="token function">docker</span> push ruoyivip/test-hello-world:1.0.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="查看仓库"><a href="#查看仓库" class="header-anchor">#</a> 查看仓库</h4> <p><a href="https://hub.docker.com/repositories" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="拉取镜像-2"><a href="#拉取镜像-2" class="header-anchor">#</a> 拉取镜像</h4> <p>通过<code>docker pull ruoyivip/test-hello-world:1.0.0</code>测试镜像是否可以拉取。</p> <h4 id="退出账号"><a href="#退出账号" class="header-anchor">#</a> 退出账号</h4> <p>通过<code>docker logout</code>退出账号</p> <h3 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> Docker Compose</h3> <p>通过前面几篇文章的学习，我们可以通过<code>Dockerfile</code>文件让用户很方便的定义一个单独的应用容器。然而，在日常工作中，经常会碰到需要多个容器相互配合来完成某项任务的情况，或者开发一个<code>Web</code>应用，除了<code>Web</code>服务容器本身，还需要数据库服务容器、缓存容器，甚至还包括负载均衡容器等等。</p> <p><code>Docker Compose</code>恰好满足了这样的需求，它是用于定义和运行多容器<code>Docker</code>应用程序的工具。通过<code>Compose</code>，您可以使用<code>YAML</code>文件来配置应用程序所需要的服务。然后使用一个命令，就可以通过<code>YAML</code>配置文件创建并启动所有服务。</p> <p><code>Docker Compose</code>项目是<code>Docker</code>官方的开源项目，来源于之前的<code>Fig</code>项目，使用<code>Python</code>语言编写。负责实现对<code>Docker</code>容器集群的快速编排。项目地址为：<code>https://github.com/docker/compose/releases</code></p> <p><code>Docker Compose</code>使用的三个步骤为：</p> <ul><li>使用<code>Dockerfile</code>文件定义应用程序的环境；</li> <li>使用<code>docker-compose.yml</code>文件定义构成应用程序的服务，这样它们可以在隔离环境中一起运行；</li> <li>执行<code>docker-compose up</code>命令来创建并启动所有服务。</li></ul> <h4 id="compose安装"><a href="#compose安装" class="header-anchor">#</a> Compose安装</h4> <p><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Overview | Docker Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="docker-compose-yml-文件详解"><a href="#docker-compose-yml-文件详解" class="header-anchor">#</a> docker-compose.yml 文件详解</h4> <p>官方文档：<code>https://docs.docker.com/compose/compose-file/</code></p> <p><code>Docker Compose</code>允许用户通过<code>docker-compose.yml</code>文件（YAML 格式）来定义一组相关联的容器为一个工程（project）。一个工程包含多个服务（service），每个服务中定义了创建容器时所需的镜像、参数、依赖等。</p> <p><code>Docker Compose</code>模板文件我们需要关注的顶级配置有<code>version</code>、<code>services</code>、<code>networks</code>、<code>volumes</code>几个部分，除<code>version</code>外，其他几个顶级配置下还有很多下级配置，后面也会详细给大家介绍，先来看看这几个顶级配置都什么意思：</p> <ul><li><code>version</code>：描述<code>Compose</code>文件的版本信息，当前最新版本为<code>3.8</code>，对应的<code>Docker</code>版本为<code>19.03.0+</code></li> <li><code>services</code>：定义服务，可以多个，每个服务中定义了创建容器时所需的镜像、参数、依赖等</li> <li><code>networkds</code>：定义网络，可以多个，根据<code>DNS server</code>让相同网络中的容器可以直接通过容器名称进行通信</li> <li><code>volumes</code>：数据卷，用于实现目录挂载</li></ul> <h5 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h5> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 描述 Compose 文件的版本信息</span>
    version: <span class="token string">&quot;3.8&quot;</span>

    <span class="token comment"># 定义服务，可以多个</span>
    services:
        nginx: <span class="token comment"># 服务名称</span>
            image: nginx <span class="token comment"># 创建容器时所需的镜像</span>
            contaainer_name: mynginx <span class="token comment"># 容器名称，默认为&quot;工程名称_服务条目名称_序号&quot;</span>
            ports: <span class="token comment"># 宿主机与容器的端口映射关系</span>
                - <span class="token string">&quot;80:80&quot;</span> <span class="token comment"># 左边宿主机端口:右边容器端口</span>
            networks: <span class="token comment"># 配置容器连接的网络,引用顶级 networks 下的条目</span>
                - nginx-net

    <span class="token comment"># 定义网络, 可以多个。如果不声明，默认会创建一个网络名称为&quot;工程名称_defaul&quot;的bridge网络</span>
    networks:
        nginx-net: <span class="token comment"># 一个具体网络的条目名称</span>
            name: nginx-net <span class="token comment"># 网络名称, 默认为&quot;工程名称_网络条目名称&quot;</span>
            driver: bridge <span class="token comment"># 网络模式，默认为bridge</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>使用<code>docker-compose up</code>创建并启动所有服务</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token comment"># 前台启动</span>
    <span class="token function">docker-compose</span> up

    <span class="token comment"># 后台启动</span>
    <span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>浏览器访问：http://192.168.10.10/ 结果如下</p> <p>使用<code>docker-compose down</code>可以停止并删除容器、网络。</p> <h5 id="version-版本信息"><a href="#version-版本信息" class="header-anchor">#</a> <code>version</code> 版本信息</h5> <p>以下为<code>Compose</code>文件的版本信息所对应的<code>Docker</code>版本。</p> <table><thead><tr><th>Compose file format</th> <th style="text-align:right;">Docker Engine release</th></tr></thead> <tbody><tr><td>3.8</td> <td style="text-align:right;">19.03.0+</td></tr> <tr><td>3.7</td> <td style="text-align:right;">18.06.0+</td></tr> <tr><td>3.6</td> <td style="text-align:right;">18.02.0+</td></tr> <tr><td>3.5</td> <td style="text-align:right;">17.12.0+</td></tr> <tr><td>3.4</td> <td style="text-align:right;">17.09.0+</td></tr> <tr><td>3.3</td> <td style="text-align:right;">17.06.0+</td></tr> <tr><td>3.2</td> <td style="text-align:right;">17.04.0+</td></tr> <tr><td>3.1</td> <td style="text-align:right;">1.13.1+</td></tr> <tr><td>3.0</td> <td style="text-align:right;">1.13.0+</td></tr> <tr><td>...</td> <td style="text-align:right;">1.x.x</td></tr></tbody></table> <h5 id="services-定义服务"><a href="#services-定义服务" class="header-anchor">#</a> services 定义服务</h5> <p><code>services</code>用来定义服务，可以多个，每个服务中定义了创建容器时所需的镜像、参数、依赖等，就像将命令行参数传递给<code>docker run</code>一样。同样，网络和数据卷的定义也是一样的。</p> <p>比如，通过<code>docker run</code>命令构建一个<code>MySQL</code>应用容器的命令如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>    <span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> mysql8 <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-v</span> /mydata/docker_mysql/conf:etc/mysql/conf.d <span class="token parameter variable">-v</span> /mydata/docker_mysql/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">1234</span> mysql:8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用<code>ocker-compose.yml</code>以后则可以这样定义:</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.8&quot;</span>
    <span class="token comment"># 定义服务，可以多个</span>
    <span class="token key atrule">services</span><span class="token punctuation">:</span>
        <span class="token key atrule">mysql</span><span class="token punctuation">:</span> <span class="token comment"># 服务名称</span>
            <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8</span> <span class="token comment"># 创建容器时所需的镜像</span>
            <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql8 <span class="token comment"># 容器名称,默认为&quot;工程名称_服务条目名称_序号&quot;</span>
            <span class="token key atrule">posts</span><span class="token punctuation">:</span> <span class="token comment"># 宿主机遇容器的端口映射关系</span>
                <span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span> <span class="token comment"># 左边宿主机端口:右边容器端口</span>
            <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token comment"># 创建容器时所需的环境变量</span>
                <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token number">1234</span>
            <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> <span class="token string">&quot;/mydata/docker_mysql/conf:/etc/mysql/conf.d&quot;</span>
                <span class="token punctuation">-</span> <span class="token string">&quot;/mydata/docker_mysql/data:/var/lib/mysql&quot;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="image镜像名称标签"><a href="#image镜像名称标签" class="header-anchor">#</a> image镜像名称标签</h5> <p>指定创建容器时所需的镜像名称标签或者镜像<code>ID</code>。如果镜像在本地不存在，会去远程拉取。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">services</span><span class="token punctuation">:</span>
        <span class="token key atrule">web</span><span class="token punctuation">:</span>
            <span class="token key atrule">image</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="build构建容器"><a href="#build构建容器" class="header-anchor">#</a> build构建容器</h5> <p>除了可以基于指定的镜像构建容器，还可以基于<code>Dockerfile</code>文件构建，在使用<code>up</code>命令时会执行构建任务</p> <h5 id="context文件路径"><a href="#context文件路径" class="header-anchor">#</a> context文件路径</h5> <p>该选项可以是<code>Dockerfile</code>文件的绝对/相对路径，也可以是远程<code>Git</code>仓库的<code>URL</code>，当提供的值是相对路径时，相对当前<code>docker-compose.yml</code>文件所在目录。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">build</span><span class="token punctuation">:</span>
        <span class="token key atrule">context</span><span class="token punctuation">:</span> . <span class="token comment"># 相对当前 docker-compose.yml 文件所在目录, 基于名称为 Dockerfile文件构建镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="dockerfile构建镜像"><a href="#dockerfile构建镜像" class="header-anchor">#</a> dockerfile构建镜像</h5> <p>一般情况下，默认都基于文件名叫<code>Dockerfile</code>的文件构建镜像，当然也可以是自定义的文件名，使用<code>dockerfile</code>声明，不过这个选项只能声明文件名，文件所在路径还是要通过<code>centext</code>来声明</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">build</span><span class="token punctuation">:</span>
        <span class="token key atrule">context</span><span class="token punctuation">:</span> . <span class="token comment"># 相对当前docker-compose.yml 文件多种目录</span>
        <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile<span class="token punctuation">-</span>alternate <span class="token comment"># 基于名称为Dockerfile-alternate 的文件构建镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="container-name容器名称"><a href="#container-name容器名称" class="header-anchor">#</a> container_name容器名称</h5> <p><code>Compose</code>创建的容器默认生成的名称格式为：<code>工程名称_服务条目名称_序号</code>。如果要使用自定义名称，使用<code>container_name</code>声明</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">services</span><span class="token punctuation">:</span>
        <span class="token key atrule">mycentos</span><span class="token punctuation">:</span>
            <span class="token key atrule">build</span><span class="token punctuation">:</span> .
            <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mycentos7 <span class="token comment"># 容器名称,默认为&quot;工程名称_服务条目名称_序号&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>因为<code>Docker</code>容器名称必须是唯一的,所有如果指定了自定义名称,就不能将服务扩展至多个容器。这样做可能会导致错误。</p> <h5 id="depend-on-容器依赖"><a href="#depend-on-容器依赖" class="header-anchor">#</a> depend_on 容器依赖</h5> <p>使用<code>Compose</code>最大的好处就是敲最少的命令做更多的事情，但一般项目容器启动的顺序是有要求的，如果直接从上到下启动容器，必然会因为容器依赖问题而启动失败。例如在没有启动数据库容器的情况下启动了<code>Web</code>应用容器，应用容器会因为找不到数据库而退出。<code>depends_on</code>就是用来解决容器依赖、启动先后问题的配置项</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.8&quot;</span>

    <span class="token key atrule">services</span><span class="token punctuation">:</span>
        <span class="token key atrule">web</span><span class="token punctuation">:</span>
            <span class="token key atrule">build</span><span class="token punctuation">:</span> .
            <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> db
                <span class="token punctuation">-</span> redis
            <span class="token key atrule">redis</span><span class="token punctuation">:</span>
                <span class="token key atrule">image</span><span class="token punctuation">:</span> redis
            <span class="token key atrule">db</span><span class="token punctuation">:</span>
                <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>上述<code>YAML</code>文件定义的容器会先启动<code>db</code>和<code>redis</code>两个服务，最后才启动<code>web</code>服务</p> <h5 id="ports暴露端口"><a href="#ports暴露端口" class="header-anchor">#</a> ports暴露端口</h5> <p>容器对外暴露的端口, 格式: 坐标宿主机端口:右边容器端口</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">&quot;8080&quot;</span>
        <span class="token punctuation">-</span> &quot;8080<span class="token punctuation">:</span><span class="token number">8080</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="expose接受端口范围"><a href="#expose接受端口范围" class="header-anchor">#</a> expose接受端口范围</h5> <p>容器暴露的端口不映射到宿主机, 只允许能被连接的服务访问。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">expose</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">&quot;80&quot;</span>
        <span class="token punctuation">-</span> <span class="token string">&quot;8080&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="restart重启策略"><a href="#restart重启策略" class="header-anchor">#</a> restart重启策略</h5> <p>容器重启策略, 简单的理解就是<code>Docker</code> 重启以后容器要不要一起启动</p> <ul><li>no: 默认的重启策略，在任何情况下都不会重启容器;</li> <li>no-failure: 容器非正常退出是，比如退出状态为非0(异常退出),才会重启容器</li> <li>always: 容器总是重新启动，即使容器被手动停止了，当<code>Docker</code>重启时容器也还是会一起启动;</li> <li>unless-stopped: 容器总是重新启动, 除非容器被停止 (手动或其他方式), 那么<code>Docker</code>重启时容器则不会启动</li></ul> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">services</span><span class="token punctuation">:</span>
        <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
            <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
            <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mynginx
            <span class="token key atrule">posts</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> <span class="token string">&quot;80:80&quot;</span>
            <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="environment环境变量"><a href="#environment环境变量" class="header-anchor">#</a> environment环境变量</h5> <p>添加环境变量。可以使用数组也可以使用字典。布尔相关的值（true、false、yes、no）都需要用引号括起来，以确保 YML 解析器不会将它们转换为真或假</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
        <span class="token key atrule">RUOYI_ENV</span><span class="token punctuation">:</span> development
        <span class="token key atrule">SHOW</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
        <span class="token key atrule">SESSION_SECRET</span><span class="token punctuation">:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>或者一下格式</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RUOYI_ENV=development
        <span class="token punctuation">-</span> SHOW=true
        <span class="token punctuation">-</span> SESSION_SECRET
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>env_file文件获取环境变量</strong></p> <p>从文件中获取环境变量，可以指定一个或多个文件，其优先级低于<code>environment</code>指定的环境变量</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> /opt/runtime_opts.env <span class="token comment"># 绝对路径</span>
        <span class="token punctuation">-</span> ./common.env <span class="token comment"># 相对路径，相对当前 docker-compose.yml 文件所在目录</span>
        <span class="token punctuation">-</span> ./apps/web.env <span class="token comment"># 相对路径，相对当前 docker-compose.yml 文件所在目录</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>注意：env 文件中的每一行需采用<code>键=值</code>格式。以<code>#</code>开头的行会被视为注释并被忽略。空行也会被忽略</p> <h5 id="command执行命令"><a href="#command执行命令" class="header-anchor">#</a> command执行命令</h5> <p>覆盖容器启动后默认执行的命令</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">command</span><span class="token punctuation">:</span> echo &quot;helloworld&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>该命令也可以是一个列表</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;echo&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;helloworld&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="volumes目录挂载"><a href="#volumes目录挂载" class="header-anchor">#</a> volumes目录挂载</h5> <p>数据卷，用于实现目录挂载，支持指定目录挂载、匿名挂载、具名挂载。</p> <ul><li>指定目录挂载的格式为：左边宿主机目录:右边容器目录，或者左边宿主机目录:右边容器目录:读写权限；</li> <li>匿名挂载格式为：容器目录即可，或者容器目录即可:读写权限；</li> <li>具名挂载格式为：数据卷条目名称:容器目录，或者数据卷条目名称:容器目录:读写权限。</li></ul> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># 描述 Compose文件的版本信息</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.8&quot;</span>

<span class="token comment"># 定义服务，可以多个</span>
<span class="token key atrule">serveices</span><span class="token punctuation">:</span>
	<span class="token key atrule">mysql</span><span class="token punctuation">:</span> <span class="token comment">#服务名称</span>
		<span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8</span> <span class="token comment"># 创建容器所需的镜像</span>
		<span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql8 <span class="token comment"># 容器名称，默认为&quot;工程名称_服务条目名称_序号&quot;</span>
		<span class="token key atrule">ports</span><span class="token punctuation">:</span> <span class="token comment"># 宿主机与容器的端口:右边容器端口</span>
			<span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span> <span class="token comment"># 左边宿主机端口:右边容器端口</span>
		<span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token comment"># 创建容器时所需要的环境变量</span>
			<span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token number">1234</span>
		<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
			<span class="token comment"># 绝对路径</span>
			<span class="token punctuation">-</span> <span class="token string">&quot;/mydata/docker_mysql/data:/var/lib/mysql&quot;</span>
			<span class="token comment"># 相对路径, 相对当前docker-compose.yml 文件所在目录</span>
			<span class="token punctuation">-</span> <span class="token string">&quot;./conf:/etc/mysql/conf.d&quot;</span>
			<span class="token comment"># 匿名挂载, 匿名挂载只需要写容器目录即可, 容器外对应的目录会在 /var/lib/docker/volume 中生成</span>
			<span class="token punctuation">-</span> <span class="token string">&quot;/var/lib/mysql&quot;</span>
			<span class="token comment"># 具名挂载，就是给数据卷起了个名字，容器外对应的目录会在/var/lib/docker/volume 中生成</span>
			<span class="token punctuation">-</span> <span class="token string">&quot;mysql-data-volume:/var/lib/mysql&quot;</span>

<span class="token comment"># 定义数据卷，可以多个</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
	<span class="token key atrule">mysql-data-volume</span><span class="token punctuation">:</span> <span class="token comment"># 一个具体数据卷的条目名称</span>
		<span class="token key atrule">name</span><span class="token punctuation">:</span> mysql<span class="token punctuation">-</span>data<span class="token punctuation">-</span>volume <span class="token comment"># 数据卷名称, 默认为&quot;工程名称_数据卷条目名称&quot;</span>
			
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="network-mode网络模式"><a href="#network-mode网络模式" class="header-anchor">#</a> network_mode网络模式</h5> <p>设置网络模式，类似 <code>docker run</code> 时添加的参数 <code>--net host</code> 或者 <code>--network host</code> 的用法</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> <span class="token string">&quot;bridge&quot;</span>
    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> <span class="token string">&quot;host&quot;</span>
    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> <span class="token string">&quot;none&quot;</span>
    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> <span class="token string">&quot;service:[service name]&quot;</span>
    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> <span class="token string">&quot;container:[container name/id]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="networks"><a href="#networks" class="header-anchor">#</a> networks</h5> <p>配置容器连接的网络，引用顶级 networks 下的条目。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token comment"># 定义服务，可以多个</span>
    <span class="token key atrule">services</span><span class="token punctuation">:</span>
      <span class="token key atrule">nginx</span><span class="token punctuation">:</span> <span class="token comment"># 服务名称</span>
        <span class="token key atrule">networks</span><span class="token punctuation">:</span> <span class="token comment"># 配置容器连接的网络，引用顶级 networks 下的条目</span>
          <span class="token punctuation">-</span> nginx<span class="token punctuation">-</span>net <span class="token comment"># 一个具体网络的条目名称</span>

    <span class="token comment"># 定义网络，可以多个。如果不声明，默认会创建一个网络名称为&quot;工程名称_default&quot;的 bridge 网络</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token key atrule">nginx-net</span><span class="token punctuation">:</span> <span class="token comment"># 一个具体网络的条目名称</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>net <span class="token comment"># 网络名称，默认为&quot;工程名称_网络条目名称&quot;</span>
        <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge <span class="token comment"># 网络模式，默认为 bridge</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="aliases"><a href="#aliases" class="header-anchor">#</a> aliases</h5> <p>网络上此服务的别名。同一网络上的其他容器可以使用服务名或此别名连接到服务容器。同一服务在不同的网络上可以具有不同的别名。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>    <span class="token comment"># 定义服务，可以多个</span>
    <span class="token key atrule">services</span><span class="token punctuation">:</span>
      <span class="token key atrule">nginx</span><span class="token punctuation">:</span> <span class="token comment"># 服务名称</span>
        <span class="token key atrule">networks</span><span class="token punctuation">:</span> <span class="token comment"># 配置容器连接的网络，引用顶级 networks 下的条目</span>
          <span class="token key atrule">nginx-net</span><span class="token punctuation">:</span> <span class="token comment"># 一个具体网络的条目名称</span>
            <span class="token key atrule">aliases</span><span class="token punctuation">:</span> <span class="token comment"># 服务别名，可以多个</span>
              <span class="token punctuation">-</span> nginx1 <span class="token comment"># 同一网络上的其他容器可以使用服务名或此别名连接到服务容器</span>

    <span class="token comment"># 定义网络，可以多个。如果不声明，默认会创建一个网络名称为&quot;工程名称_default&quot;的 bridge 网络</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token key atrule">nginx-net</span><span class="token punctuation">:</span> <span class="token comment"># 一个具体网络的条目名称</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>net <span class="token comment"># 网络名称，默认为&quot;工程名称_网络条目名称&quot;</span>
        <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge <span class="token comment"># 网络模式，默认为 bridge</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="compose常用命令"><a href="#compose常用命令" class="header-anchor">#</a> Compose常用命令</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Commands:
  build              <span class="token comment"># 构建或重新构建服务</span>
  create             <span class="token comment"># 创建服务</span>
  up                 <span class="token comment"># 创建并启动所有服务的容器。指定多个yml加-f选项。以守护进程模式运行加-d选项。</span>
  down               <span class="token comment"># 停止并删除所有服务的容器、网络、镜像、数据卷</span>
  pull               <span class="token comment"># 拉取服务依赖的镜像</span>
  push               <span class="token comment"># 推送服务图片</span>
  start              <span class="token comment"># 启动服务容器</span>
  stop               <span class="token comment"># 停止服务容器</span>
  <span class="token function">top</span>                <span class="token comment"># 显示正在运行的进程</span>
  pause              <span class="token comment"># 暂停服务容器</span>
  unpause            <span class="token comment"># 恢复服务容器。</span>
  events             <span class="token comment"># 从容器接收实时事件</span>
  <span class="token builtin class-name">exec</span>               <span class="token comment"># 进入服务容器</span>
  <span class="token builtin class-name">help</span>               <span class="token comment"># 查看帮助</span>
  images             <span class="token comment"># 打印服务容器所对应的镜像</span>
  <span class="token function">kill</span>               <span class="token comment"># 通过发送SIGKILL信号停止指定服务的容器。</span>
  logs               <span class="token comment"># 查看服务容器的输出日志</span>
  port               <span class="token comment"># 打印指定服务容器的某个端口所映射的宿主机端口</span>
  <span class="token function">ps</span>                 <span class="token comment"># 列出工程中所有服务的容器</span>
  restart            <span class="token comment"># 重启服务容器</span>
  <span class="token function">rm</span>                 <span class="token comment"># 删除服务（停止状态）容器</span>
  run                <span class="token comment"># 列出工程中所有服务的容器</span>
  scale              <span class="token comment"># 设置服务的容器数</span>
  version            <span class="token comment"># 显示Docker Compose版本信息</span>
  bundle             <span class="token comment"># 从compose中生成一个Docker包</span>
  config             <span class="token comment"># 验证并查看Compose文件,docker-compose config -q验证docker-compose.yml文件。当配置正确时，不输出任何内容，当配置错误时，输出错误信息</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://docs.docker.com/desktop/" target="_blank" rel="noopener noreferrer">码头工人桌面|码头工人文档 (docker.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://doc.ruoyi.vip/ruoyi-cloud/cloud/dokcer.html" target="_blank" rel="noopener noreferrer">应用容器部署 | RuoYi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://docs.docker.com/reference/" target="_blank" rel="noopener noreferrer">Reference documentation | Docker Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer">Dockerfile reference | Docker Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub Container Image Library | App Containerization<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/1/2023, 2:49:09 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blogs/Go/Go-基础语法.html">
          Go
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#应用容器" class="sidebar-link reco-side-应用容器" data-v-b57cc07c>应用容器</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#基本介绍" class="sidebar-link reco-side-基本介绍" data-v-b57cc07c>基本介绍</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#安装下载" class="sidebar-link reco-side-安装下载" data-v-b57cc07c>安装下载</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#配置镜像" class="sidebar-link reco-side-配置镜像" data-v-b57cc07c>配置镜像</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#架构概念" class="sidebar-link reco-side-架构概念" data-v-b57cc07c>架构概念</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#镜像命令" class="sidebar-link reco-side-镜像命令" data-v-b57cc07c>镜像命令</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#容器命令" class="sidebar-link reco-side-容器命令" data-v-b57cc07c>容器命令</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#应用部署" class="sidebar-link reco-side-应用部署" data-v-b57cc07c>应用部署</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#redis" class="sidebar-link reco-side-redis" data-v-b57cc07c>Redis</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#镜像构建" class="sidebar-link reco-side-镜像构建" data-v-b57cc07c>镜像构建</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#示例" class="sidebar-link reco-side-示例" data-v-b57cc07c>示例</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#dockerfile" class="sidebar-link reco-side-dockerfile" data-v-b57cc07c>Dockerfile</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#镜像仓库" class="sidebar-link reco-side-镜像仓库" data-v-b57cc07c>镜像仓库</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#docker-compose" class="sidebar-link reco-side-docker-compose" data-v-b57cc07c>Docker Compose</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/Go/Go-Docker.html#参考" class="sidebar-link reco-side-参考" data-v-b57cc07c>参考</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><div class="RibbonAnimation"></div><!----><div id="goTop" class="hide-cat" data-v-bf92849a></div><!----></div></div>
    <script src="/assets/js/app.f847ac77.js" defer></script><script src="/assets/js/4.a2985191.js" defer></script><script src="/assets/js/1.ab21178e.js" defer></script><script src="/assets/js/35.e8e97e79.js" defer></script>
  </body>
</html>
